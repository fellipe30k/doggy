<!-- app/views/shared/_navbar.html.erb -->
<nav class="fixed top-0 left-0 right-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800">
  <div class="px-4 py-3">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <div class="flex items-center space-x-2">
        <div class="w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center">
          <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
            <path d="M10 2L3 7v11h4v-6h6v6h4V7l-7-5z"/>
          </svg>
        </div>
        <span class="text-lg font-semibold">Doggy</span>
      </div>

      <!-- Company Selector (Staff only) -->
      <% if current_user.staff? %>
        <div class="flex items-center space-x-2">
          <%= form_with url: staff_switch_company_path(0), method: :get, local: true, class: "inline" do |f| %>
            <%= f.select :company_id, 
                options_from_collection_for_select(Company.active, :id, :name, @current_company_id),
                { prompt: "Selecionar ClÃ­nica" },
                { class: "bg-gray-800 text-white text-sm rounded-lg px-2 py-1 border border-gray-700", 
                  onchange: "this.form.submit();" } %>
          <% end %>
        </div>
      <% end %>

      <!-- User Menu -->
      <div class="flex items-center space-x-2">
        <div class="text-right">
          <div class="text-sm font-medium"><%= current_user.full_name %></div>
          <div class="text-xs text-gray-400 capitalize"><%= current_user&.role&.humanize %></div>
        </div>
        <%= link_to destroy_user_session_path, method: :delete, 
            class: "p-2 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors" do %>
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
          </svg>
        <% end %>
      </div>
    </div>
  </div>
</nav>